(this.webpackJsonpskill_tree2=this.webpackJsonpskill_tree2||[]).push([[0],{20:function(t,e,n){},21:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),i=n(11),c=n.n(i),o=n(2),s=n(0);function u(t){var e=t.setVerticesInput,n=Object(r.useState)(""),i=Object(o.a)(n,2),c=i[0],u=i[1],f=Object(r.useState)(""),l=Object(o.a)(f,2),g=l[0],d=l[1],h=Object(r.useState)(""),j=Object(o.a)(h,2),v=j[0],b=j[1],p=Object(r.useRef)(null);return Object(s.jsx)(a.a.Fragment,{children:Object(s.jsx)("div",{class:"vertex-input",children:Object(s.jsxs)("form",{onSubmit:function(t){t.preventDefault(),c||alert("".concat(p.current.name," must not be empty")),e({vertex:c,incomming:g,outgoing:v}),u(""),d(""),b("")},children:[Object(s.jsx)("label",{children:"Incomming Vertex"}),Object(s.jsx)("input",{name:"incomming",placeholder:"Ex: a, b, c ...",value:g,onChange:function(t){d(t.target.value)}}),Object(s.jsx)("label",{children:"Vertex Name"}),Object(s.jsx)("input",{name:"vertex",value:c,onChange:function(t){u(t.target.value)},ref:p}),Object(s.jsx)("label",{children:"Outgoing Vertex"}),Object(s.jsx)("input",{name:"outgoing",value:v,placeholder:"Ex: d, e ,f...",onChange:function(t){b(t.target.value)}}),Object(s.jsx)("button",{children:"Create !"})]})})})}var f=n(3),l=n(4),g=n(7),d=a.a.createContext(),h=function(t){var e=Object(r.useState)({_nameOfVertex:{isDisplaced:!1,positionOrigin:[],positionNew:[],translate:{x:0,y:0}}}),n=Object(o.a)(e,2),a=n[0],i=n[1];return Object(s.jsx)(d.Provider,{value:[a,i],children:t.children})},j=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a=Object(l.a)(e),i=a[0],c=a[1],s=n.onPointerDown,u=void 0===s?function(){}:s,g=n.onPointerUp,h=void 0===g?function(){}:g,j=n.onPointerMove,v=void 0===j?function(){}:j,b=n.onDrag,p=void 0===b?function(){}:b,O=Object(r.useState)({isDragging:!1,originX:0,originY:0,translateX:0,translateY:0,lastTranslateX:0,lastTranslateY:0}),m=Object(o.a)(O,2),x=m[0],y=m[1],D=Object(r.useContext)(d),w=Object(o.a)(D,2),S=w[0],k=(w[1],function(t){y((function(e){return Object(f.a)(Object(f.a)({},e),{},{isDragging:!0,originX:t.pageX,originY:t.pageY})})),u(t)}),G=function(t){y((function(t){return Object(f.a)(Object(f.a)({},t),{},{isDragging:!1,originX:0,originY:0,lastTranslateX:t.translateX,lastTranslateY:t.translateY})})),h()},E=function(t){var e=t.pageX-x.originX+x.lastTranslateX,n=t.pageY-x.originY+x.lastTranslateY;y((function(t){return Object(f.a)(Object(f.a)({},t),{},{translateX:e,translateY:n})})),p(e,n),v(t)};return Object(r.useEffect)((function(){var e=t.current;return e.addEventListener("mousedown",k),x.isDragging&&(document.addEventListener("mousemove",E),document.addEventListener("mouseup",G)),function(){e.removeEventListener("mousedown",k),document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",G)}}),[Object(l.a)(e),x.isDragging]),Object(r.useEffect)((function(){var t=i.isInitGraph,e=i.isDefaultGraph,n=i.isDraggedGraph;i.currentDragTarget;if(!t){if(n&&S[c]){var r=S[c].translate,a=r.x,o=r.y;y((function(t){return Object(f.a)(Object(f.a)({},t),{},{translateX:a,translateY:o,lastTranslateX:a,lastTranslateY:o})}))}e&&y((function(t){return Object(f.a)(Object(f.a)({},t),{},{translateX:0,translateY:0,lastTranslateX:0,lastTranslateY:0})}))}}),[i]),{isDragging:x.isDragging,translateX:x.translateX,translateY:x.translateY}};function v(){return{drawConnectorInitial:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{divfrom:{x:0,y:0},divTo:{x:0,y:0}};b(t,e,n,r)},drawConnectorDynamic:function(t,e,n,r){t.forEach((function(t){var a=t.current;a.getAttribute("vertex_from")!==e?a.getAttribute("vertex_to")!==e||b(null,n,a,r):b(n,null,a,r)}))}}}var b=function(t,e,n,r){if(t&&e){var a=p(t,e,r),i=Object(o.a)(a,2),c=i[0],s=i[1],u="M"+c.x+","+c.y+" C"+(c.x-100)+","+c.y+" "+(s.x-100)+","+s.y+" "+s.x+","+s.y;n.setAttribute("d",u)}var f=n.getAttribute("d").split(" ");if(null===t){var l={x:e.offsetLeft-8+r.x,y:e.offsetTop+e.offsetHeight/2-10+r.y},g=f[0]+" "+f[1]+" "+(l.x-100)+","+l.y+" "+l.x+","+l.y;n.setAttribute("d",g)}if(null===e){var d={x:t.offsetLeft-8+r.x,y:t.offsetTop+t.offsetHeight/2+10+r.y},h="M"+d.x+","+d.y+" C"+(d.x-100)+","+d.y+" "+f[2]+" "+f[3];n.setAttribute("d",h)}},p=function(t,e,n){var r={x:t.offsetLeft-8,y:t.offsetTop+t.offsetHeight/2+10},a={x:e.offsetLeft-8,y:e.offsetTop+e.offsetHeight/2-10};return r.x+=n.divFrom.x,r.y+=n.divFrom.y,a.x+=n.divTo.x,a.y+=n.divTo.y,[r,a]};function O(t){var e=t.name,n=t.column,a=t.row,i=t.forwardedRef,c=t.forwardedArrowsRefs,u=t.graphState,l=t.setGraphState,h=150+150*a,b=150*n,p=h+"px",O=b+"px",x=Object(r.useState)(!1),y=Object(o.a)(x,2),D=y[0],w=y[1],S=Object(r.useState)(!1),k=Object(o.a)(S,2),G=k[0],E=k[1],T=Object(r.useContext)(d),C=Object(o.a)(T,2),X=C[0],Y=C[1],_=Object(r.useState)({x:0,y:0}),A=Object(o.a)(_,2),N=A[0],R=A[1],I=v().drawConnectorDynamic,L=j(i,[u,e],{onDrag:function(t,n){var r={x:t,y:n},a=m(c,e);R(r),I(a,e,i.current,r)},onPointerUp:function(t){Y((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(g.a)({},e,{isDisplaced:D,positionOrigin:[h,b],positionNew:[h+N.x,b+N.y],translate:N}))})),E(!G)},onPointerDown:function(t){w(!0),l((function(e){return Object(f.a)(Object(f.a)({},e),{},{isDefaultGraph:!1,isInitGraph:!1,isDraggedGraph:!1,isDraggedGraph_byDrag:!0,currentDragTarget:t.currentTarget.id})}))}}),P=L.isDragging,F=L.translateX,V=L.translateY,B={position:"absolute",top:"".concat(p),left:"".concat(O),transform:"translateX(".concat(N.x,"px) translateY(").concat(N.y,"px)")};return Object(r.useEffect)((function(){Y((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(g.a)({},e,{isDisplaced:D,positionOrigin:[h,b],positionNew:[h+N.x,b+N.y],translate:N}))}))}),[]),Object(r.useEffect)((function(){var t=u.isInitGraph,n=u.isDefaultGraph,r=u.isDraggedGraph,a=u.isDraggedGraph_byDrag,o=u.currentDragTarget,s={};if(!t){if(n&&(s={x:0,y:0}),r&&(s=X[e]?X[e].translate:{x:0,y:0}),a&&(s=X[e]?X[e].translate:{x:0,y:0}),a&&o!==e){s={x:0,y:0};var f=m(c,e);I(f,e,i.current,s)}R(s)}}),[u.isDefaultGraph]),Object(s.jsxs)("div",{ref:i,style:B,className:"vertex",id:e,children:[P?"".concat(e," is now \ud83d\ude80"):e,Object(s.jsx)("p",{children:"useDrag:  (".concat(F,",").concat(V,")")}),Object(s.jsx)("p",{children:"vertex:  (".concat(N.x,",").concat(N.y,")")})]})}var m=function(t,e){return t.filter((function(t){return(t=t.current)&&(t.getAttribute("vertex_from")===e||t.getAttribute("vertex_to")===e)}))},x=n(12);function y(t){var e=t.incommingName,n=t.name,a=t.forwardedRef,i=t.forwardedDivsRef,c=t.graphState,u=Object(r.useContext)(d),f=Object(o.a)(u,1)[0],l=v().drawConnectorInitial;return Object(r.useEffect)((function(){var t,r={from:null,to:null},o=Object(x.a)(i);try{for(o.s();!(t=o.n()).done;){var s=t.value;(s=s.current).id===e&&(r.from=s),s.id===n&&(r.to=s)}}catch(g){o.e(g)}finally{o.f()}var u={divFrom:{x:0,y:0},divTo:{x:0,y:0}};!c.isDefaultGraph&&f[e]&&(u.divFrom=f[e].translate),!c.isDefaultGraph&&f[n]&&(u.divTo=f[n].translate),l(r.from,r.to,a.current,u)}),[c,i]),Object(s.jsx)("g",{fill:"none",stroke:"black",strokeWidth:"2",markerEnd:"url(#arrowhead)",style:{position:"absolute"},children:Object(s.jsx)("path",{ref:a,id:"arrowLeft_".concat(n,"_").concat(e),vertex_from:e,vertex_to:n})})}function D(t){var e=t.graphState,n=t.setGraphState,a=Object(r.useContext)(d),i=Object(o.a)(a,2),c=(i[0],i[1],e.isDefaultGraph);e.isInitGraph,e.isDraggedGraph;return Object(s.jsx)("div",{children:Object(s.jsx)("button",{onClick:function(){var t={isDraggedGraph:!1,isDefaultGraph:!1,isInitGraph:!1,isDraggedGraph_byDrag:!1};c&&(t.isDraggedGraph=!0),c||(t.isDefaultGraph=!0),n((function(e){return Object(f.a)(Object(f.a)({},e),t)}))},children:c?"Back to Dragged Place":"Back to Default Place"})})}function w(t){var e=t.graph,n=t.topSorted,i=n.length,c=S(e),u=Object(o.a)(c,2),g=u[0],d=u[1],h=Object(r.useState)({isInitGraph:!0,isDefaultGraph:!1,isDraggedGraph:!1,isDraggedGraph_byDrag:!1,currentDragTarget:null}),j=Object(o.a)(h,2),v=j[0],b=j[1],p=Object(r.useRef)([]);p.current=Object(l.a)(new Array(i)).map((function(){return a.a.createRef()}));var m=Object(r.useRef)([]);m.current=Object(l.a)(new Array(d)).map((function(){return a.a.createRef()}));return Object(s.jsxs)("div",{className:"graph-container",children:[Object(s.jsx)("p",{id:"instructions",children:"Click and drag either div to see automatic arrow adjustments."}),Object(s.jsxs)("div",{className:"graph-wrapper",children:[Object(s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",children:[Object(s.jsx)("defs",{children:Object(s.jsx)("marker",{id:"arrowhead",viewBox:"0 0 10 10",refX:"3",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:Object(s.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z"})})}),function(t,e){return Object(l.a)(Array(e)).map((function(e,n){return Object(s.jsx)(y,{incommingName:t[n].incommingName,name:t[n].name,forwardedRef:m.current[n],forwardedDivsRef:p.current,graphState:v},n)}))}(g,d)]}),function(){var t=Object(f.a)({},e.rank),r=t["".concat(n[0])],a={};return n.map((function(e,n){var i=r-t[e];a[i]=a[i]+1||1;var c=a[i];return Object(s.jsx)(O,{name:e,column:c,row:i,forwardedRef:p.current[n],forwardedArrowsRefs:m.current,graphState:v,setGraphState:b},e)}))}()]}),Object(s.jsx)(D,{graphState:v,setGraphState:b})]})}var S=function(t){var e=Object(l.a)(t.topSorted),n={},r=0;return e.reverse().map((function(e,a){t.vertices[e].incomingNames.map((function(t,a){n[r]={name:e,incommingName:t},r+=1}))})),[n,r]};function k(t){var e=t.verticesInput,n=t.graph,a=e.incomming,i=e.vertex,c=e.outgoing;if(i)try{!function(){if(a)switch(1===(a=a.split(",")).length){case!0:a=a[0];break;case!1:a.forEach((function(t,e){a[e]=t.trim()}))}if(c)switch(1===(c=c.split(",")).length){case!0:c=c[0];break;case!1:c.forEach((function(t,e){c[e]=t.trim()}))}n.addEdges(i,null,c,a)}(),n.giveRank()}catch(o){alert(o)}return Object(s.jsx)(r.Fragment,{children:Object(s.jsx)(w,{graph:n,topSorted:n.topSorted})})}var G=n(8),E=n(9),T=n(14),C=n(13),X=new(function(t){Object(T.a)(n,t);var e=Object(C.a)(n);function n(){var t;return Object(G.a)(this,n),(t=e.call(this)).rank={},t.topSorted=[],t}return Object(E.a)(n,[{key:"topologySortCaller",value:function(){var t=[];return this.topsort((function(e,n){t.push(e.name)})),this.topSorted=t,t}},{key:"giveRank",value:function(){this.topSorted.length!==this.names.length&&this.topologySortCaller(),this.rank={},this._visit_giveRank()}},{key:"_visit_giveRank",value:function(){var t=this,e=Object(l.a)(this.topSorted).reverse(),n=0;e.forEach((function(r,a){var i=Object(l.a)(t.vertices[r].incomingNames),c=e[a+1];if(i.includes(c))return i.includes(c)?(t.rank[r]=n,void(n+=1)):void 0;t.rank[r]=n}))}}]),n}(function(){function t(){Object(G.a)(this,t),this.names=[],this.vertices={}}return Object(E.a)(t,[{key:"add",value:function(t){if(t){if(this.vertices.hasOwnProperty(t))return this.vertices[t];var e={name:t,incoming:{},incomingNames:[],hasOutgoing:!1,value:null};return this.vertices[t]=e,this.names.push(t),e}}},{key:"map",value:function(t,e){this.add(t).value=e}},{key:"visit",value:function(t,e,n,r){var a=t.name,i=t.incoming,c=t.incomingNames,o=c.length;if(n||(n={}),r||(r=[]),!n.hasOwnProperty(a)){r.push(a),n[a]=!0;for(var s=0;s<o;s++)this.visit(i[c[s]],e,n,r);e(t,r),r.pop()}}},{key:"addEdge",value:function(t,e){if(t&&e&&t!==e){var n=this.add(t),r=this.add(e);r.incoming.hasOwnProperty(t)||(this.visit(n,(function(t,n){if(t.name===e)throw new Error("cycle detected: "+e+" <- "+n.join(" <- "))})),n.hasOutgoing=!0,r.incoming[t]=n,r.incomingNames.push(t))}}},{key:"addEdges",value:function(t,e,n,r){var a=this;this.map(t,e),n&&("[object String]"===Object.prototype.toString.call(n)&&this.addEdge(t,n),Array.isArray(n)&&n.forEach((function(e){a.addEdge(t,e)}))),r&&("[object String]"===Object.prototype.toString.call(r)&&this.addEdge(r,t),Array.isArray(r)&&r.forEach((function(e){a.addEdge(e,t)})))}},{key:"topsort",value:function(t){for(var e={},n=this.vertices,r=this.names,a=r.length,i=0;i<a;i++){var c=n[r[i]];c.hasOutgoing||this.visit(c,t,e)}}}]),t}()));var Y=function(){var t=Object(r.useState)({vertex:"",incomming:"",outgoing:""}),e=Object(o.a)(t,2),n=e[0],a=e[1];return Object(s.jsx)("div",{children:Object(s.jsxs)(h,{children:[Object(s.jsx)(k,{verticesInput:n,graph:X}),Object(s.jsx)(u,{setVerticesInput:a})]})})};var _=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(Y,{})})},A=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),i(t),c(t)}))};n(20);c.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(_,{})}),document.getElementById("root")),A()}},[[21,1,2]]]);
//# sourceMappingURL=main.59419cf3.chunk.js.map